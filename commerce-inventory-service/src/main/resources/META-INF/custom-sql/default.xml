<?xml version="1.0"?>

<custom-sql>
	<sql id="com.liferay.commerce.inventory.service.persistence.CommerceInventoryAuditFinder.findOldInventoryAudit">
		<![CDATA[
			SELECT
				CIAudit.*
			FROM
				CIAudit
			WHERE
				CIAudit.createDate < ?
		]]>
	</sql>
	<sql id="com.liferay.commerce.inventory.service.persistence.CommerceInventoryBookedQuantityFinder.findOldTempBookedQuantities">
		<![CDATA[
			SELECT
				CIBookedQuantity.*
			FROM
				CIBookedQuantity
			WHERE
				CIBookedQuantity.expireDate < NOW()
		]]>
	</sql>
	<sql id="com.liferay.commerce.inventory.service.persistence.CommerceInventoryReplenishmentItemFinder.findByGroupAndSku">
		<![CDATA[
			SELECT
				CIReplenishmentItem.*
			FROM
				CIWarehouse
			INNER JOIN
				CIWarehouseGroupRel
			ON
				CIWarehouse.CIWarehouseId = CIWarehouseGroupRel.commerceWarehouseId
			INNER JOIN
				CIReplenishmentItem
			ON
				CIReplenishmentItem.commerceWarehouseId = CIWarehouse.CIWarehouseId
			WHERE
				(CIWarehouse.companyId = ?) AND
				(CIWarehouseGroupRel.groupId = ?) AND
				(CIReplenishmentItem.sku = ?)
		]]>
	</sql>
	<sql id="com.liferay.commerce.inventory.service.persistence.CommerceInventoryWarehouseFinder.countByG_A">
		<![CDATA[
			SELECT
				COUNT(DISTINCT commerceWarehouseId) AS COUNT_VALUE
			FROM
				CIWarehouse
			INNER JOIN
				CIWarehouseGroupRel
			ON
				CIWarehouse.CIWarehouseId = CIWarehouseGroupRel.commerceWarehouseId
			WHERE
				(CIWarehouse.companyId = ?) AND
				(CIWarehouseGroupRel.groupId = ?) AND
				(CIWarehouse.active = ?)
		]]>
	</sql>
	<sql id="com.liferay.commerce.inventory.service.persistence.CommerceInventoryWarehouseFinder.countByG_A_C">
		<![CDATA[
			SELECT
				COUNT(DISTINCT commerceWarehouseId) AS COUNT_VALUE
			FROM
				CIWarehouse
			INNER JOIN
				CIWarehouseGroupRel
			ON
				CIWarehouse.CIWarehouseId = CIWarehouseGroupRel.commerceWarehouseId
			WHERE
				(CIWarehouse.companyId = ?) AND
				(CIWarehouseGroupRel.groupId = ?) AND
				(CIWarehouse.active = ?) AND
				(CIWarehouse.countryTwoLettersISOCode = ?)
		]]>
	</sql>
	<sql id="com.liferay.commerce.inventory.service.persistence.CommerceInventoryWarehouseFinder.countByG_N_D_S_C_Z_C">
		<![CDATA[
			SELECT
				COUNT(DISTINCT commerceWarehouseId) AS COUNT_VALUE
			FROM
				CIWarehouse
			INNER JOIN
				CIWarehouseGroupRel
			ON
				CIWarehouse.CIWarehouseId = CIWarehouseGroupRel.commerceWarehouseId
			WHERE
				(CIWarehouse.companyId = ?) AND
				(CIWarehouseGroupRel.groupId = ?) AND
				(
					(LOWER(CIWarehouse.name) LIKE ? [$AND_OR_NULL_CHECK$]) [$AND_OR_CONNECTOR$]
					(CIWarehouse.description LIKE ? [$AND_OR_NULL_CHECK$]) [$AND_OR_CONNECTOR$]
					(
						(LOWER(CIWarehouse.street1) LIKE ? [$AND_OR_NULL_CHECK$]) OR
						(LOWER(CIWarehouse.street2) LIKE ? [$AND_OR_NULL_CHECK$]) OR
						(LOWER(CIWarehouse.street3) LIKE ? [$AND_OR_NULL_CHECK$])
					) [$AND_OR_CONNECTOR$]
					(LOWER(CIWarehouse.city) LIKE ? [$AND_OR_NULL_CHECK$]) [$AND_OR_CONNECTOR$]
					(LOWER(CIWarehouse.zip) LIKE ? [$AND_OR_NULL_CHECK$])
				) AND
				(CIWarehouse.countryTwoLettersISOCode = ?) [$ALL$]
		]]>
	</sql>
	<sql id="com.liferay.commerce.inventory.service.persistence.CommerceInventoryWarehouseFinder.findByG_N_D_S_C_Z_C">
		<![CDATA[
			SELECT
				{CIWarehouse.*}
			FROM
				CIWarehouse
			INNER JOIN
				CIWarehouseGroupRel
			ON
				CIWarehouse.CIWarehouseId = CIWarehouseGroupRel.commerceWarehouseId
			WHERE
				(CIWarehouse.companyId = ?) AND
				(CIWarehouseGroupRel.groupId = ?) AND
				(
					(LOWER(CIWarehouse.name) LIKE ? [$AND_OR_NULL_CHECK$]) [$AND_OR_CONNECTOR$]
					(CIWarehouse.description LIKE ? [$AND_OR_NULL_CHECK$]) [$AND_OR_CONNECTOR$]
					(
						(LOWER(CIWarehouse.street1) LIKE ? [$AND_OR_NULL_CHECK$]) OR
						(LOWER(CIWarehouse.street2) LIKE ? [$AND_OR_NULL_CHECK$]) OR
						(LOWER(CIWarehouse.street3) LIKE ? [$AND_OR_NULL_CHECK$])
					) [$AND_OR_CONNECTOR$]
					(LOWER(CIWarehouse.city) LIKE ? [$AND_OR_NULL_CHECK$]) [$AND_OR_CONNECTOR$]
					(LOWER(CIWarehouse.zip) LIKE ? [$AND_OR_NULL_CHECK$])
				) AND
				(CIWarehouse.countryTwoLettersISOCode = ?) [$ALL$]
			ORDER BY
				CIWarehouse.name ASC
		]]>
	</sql>
	<sql id="com.liferay.commerce.inventory.service.persistence.CommerceInventoryWarehouseFinder.findWarehousesByGroupId">
		<![CDATA[
			SELECT
				CIWarehouse.*
			FROM
				CIWarehouse
			INNER JOIN
				CIWarehouseGroupRel
			ON
				CIWarehouse.CIWarehouseId = CIWarehouseGroupRel.commerceWarehouseId
			WHERE
				(CIWarehouse.companyId = ?) AND
				(CIWarehouseGroupRel.groupId = ?)
		]]>
	</sql>
	<sql id="com.liferay.commerce.inventory.service.persistence.CommerceInventoryWarehouseFinder.findWarehousesByGroupIdAndActive">
		<![CDATA[
			SELECT
				CIWarehouse.*
			FROM
				CIWarehouse
			INNER JOIN
				CIWarehouseGroupRel
			ON
				CIWarehouse.CIWarehouseId = CIWarehouseGroupRel.commerceWarehouseId
			WHERE
				(CIWarehouse.companyId = ?) AND
				(CIWarehouseGroupRel.groupId = ?) AND
				(CIWarehouse.active = ?)
		]]>
	</sql>
	<sql id="com.liferay.commerce.inventory.service.persistence.CommerceInventoryWarehouseFinder.findWarehousesByGroupIdAndActiveAndCountryISOCode">
		<![CDATA[
			SELECT
				CIWarehouse.*
			FROM
				CIWarehouse
			INNER JOIN
				CIWarehouseGroupRel
			ON
				CIWarehouse.CIWarehouseId = CIWarehouseGroupRel.commerceWarehouseId
			WHERE
				(CIWarehouse.companyId = ?) AND
				(CIWarehouseGroupRel.groupId = ?) AND
				(CIWarehouse.active = ?) AND
				(CIWarehouse.countryTwoLettersISOCode = ?)
		]]>
	</sql>
	<sql id="com.liferay.commerce.inventory.service.persistence.CommerceInventoryWarehouseFinder.findWarehousesByGroupIdAndSku">
		<![CDATA[
			SELECT
				CIWarehouse.*
			FROM
				CIWarehouse
			INNER JOIN
				CIWarehouseGroupRel
			ON
				CIWarehouse.CIWarehouseId = CIWarehouseGroupRel.commerceWarehouseId
			INNER JOIN
				CIWarehouseItem
			ON
				CIWarehouseItem.commerceWarehouseId = CIWarehouse.CIWarehouseId
			WHERE
				(CIWarehouse.companyId = ?) AND
				(CIWarehouseGroupRel.groupId = ?) AND
				(CIWarehouseItem.sku = ?)
		]]>
	</sql>
	<sql id="com.liferay.commerce.inventory.service.persistence.CommerceInventoryWarehouseItemFinder.findStockQuantityByGroupIdAndSku">
		<![CDATA[
			SELECT
				SUM(CIWarehouseItem.quantity) AS SUM_VALUE
			FROM
				CIWarehouseItem
			INNER JOIN
				CIWarehouseGroupRel
			ON
				CIWarehouseGroupRel.commerceWarehouseId = CIWarehouseItem.commerceWarehouseId
			WHERE
				(CIWarehouse.companyId = ?) AND
				(CIWarehouseGroupRel.groupId = ?) AND
				(CIWarehouseItem.sku = ?)
		]]>
	</sql>
</custom-sql>