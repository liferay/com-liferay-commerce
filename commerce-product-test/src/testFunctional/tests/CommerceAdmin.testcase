<definition component-name="portal-commerce">
	<property name="portal.release" value="true" />
	<property name="portal.upstream" value="true" />
	<property name="testray.main.component.name" value="Commerce" />

	<set-up>
		<execute macro="TestCase#setUpPortalInstance" />

		<execute macro="User#firstLoginPG" />

		<execute macro="CommerceConfiguration#commerceAdminSetUp" />

		<execute macro="ProductMenu#gotoPortlet">
			<var name="category" value="Users" />
			<var name="panel" value="Control Panel" />
			<var name="portlet" value="Users and Organizations" />
		</execute>

		<execute macro="User#addCP">
			<var name="userEmailAddress" value="commerceuser@liferay.com" />
			<var name="userFirstName" value="Commerce" />
			<var name="userLastName" value="User" />
			<var name="userScreenName" value="commerce" />
		</execute>
	</set-up>

	<tear-down>
		<var method="PropsUtil#get('test.portal.instance')" name="testPortalInstance" />

		<if>
			<equals arg1="${testPortalInstance}" arg2="true" />
			<then>
				<execute macro="PortalInstances#tearDownCP" />
			</then>
			<else>
				<execute macro="CommerceConfiguration#commerceSettingsTearDown" />

				<execute macro="CommerceConfiguration#commerceAdminTearDown" />
			</else>
		</if>
	</tear-down>

	<command name="CreateNewAvailabilityEstimate">
		<property name="portal.acceptance" value="true" />
		<property name="test.name.skip.portal.instance" value="CommerceAdmin#CreateNewAvailabilityEstimate" />

		<execute macro="ProductMenu#gotoPortlet">
			<var name="category" value="Commerce" />
			<var name="panel" value="Site Administration" />
			<var name="portlet" value="Settings" />
		</execute>

		<execute macro="CommerceNavigator#gotoCommercePortletNavItem">
			<var name="navItem" value="Availability Estimates" />
		</execute>

		<execute function="Click" locator1="Button#PLUS" />

		<execute macro="CommerceEntry#addNewAvailabilityEstimatesEntry">
			<var name="entryName" value="New Availability Estimate" />
		</execute>

		<execute macro="Button#clickSave" />

		<execute function="AssertElementPresent" locator1="Message#SUCCESS" />
	</command>

	<command name="CreateNewCatalogRule">
		<property name="portal.acceptance" value="true" />
		<property name="test.name.skip.portal.instance" value="CommerceAdmin#CreateNewCatalogRule" />

		<execute macro="CommerceEntry#createNewUserSegment">
			<var name="criteriaType" value="Users" />
			<var name="criterionEntryName" value="Commerce User" />
			<var name="entryName" value="User Segment" />
		</execute>

		<execute macro="ProductMenu#gotoPortlet">
			<var name="category" value="Commerce" />
			<var name="panel" value="Site Administration" />
			<var name="portlet" value="Catalog Rules" />
		</execute>

		<execute function="Click" locator1="Button#PLUS" />

		<execute macro="CommerceEntry#addNewCatalogRule">
			<var name="catalogRuleType" value="All Products" />
			<var name="entryName" value="New Catalog Rule" />
			<var name="userSegment" value="User Segment" />
		</execute>
	</command>

	<command name="CreateNewCountry">
		<property name="portal.acceptance" value="true" />
		<property name="test.name.skip.portal.instance" value="CommerceAdmin#CreateNewCountry" />

		<execute macro="ProductMenu#gotoPortlet">
			<var name="category" value="Commerce" />
			<var name="panel" value="Site Administration" />
			<var name="portlet" value="Settings" />
		</execute>

		<execute macro="CommerceNavigator#gotoCommercePortletNavItem">
			<var name="navItem" value="Countries" />
		</execute>

		<execute function="Click" locator1="Button#PLUS" />

		<execute macro="CommerceEntry#addNewCountriesEntry">
			<var name="entryName" value="New Country" />
		</execute>

		<execute macro="Button#clickSave" />

		<execute function="AssertElementPresent" locator1="Message#SUCCESS" />

		<execute macro="CommerceEntry#gotoMenuTab">
			<var name="menuTab" value="Regions" />
		</execute>

		<execute function="Click" locator1="Button#PLUS" />

		<execute macro="CommerceEntry#addNewRegionsEntry">
			<var name="code" value="NRE" />
			<var name="entryName" value="New Region" />
		</execute>

		<execute macro="Button#clickSave" />

		<execute function="AssertElementPresent" locator1="Message#SUCCESS" />
	</command>

	<command name="CreateNewCurrency">
		<property name="test.name.skip.portal.instance" value="CommerceAdmin#CreateNewCurrency" />

		<execute macro="CommerceEntry#createNewCurrenciesEntry">
			<var name="code" value="NCU" />
			<var name="entryName" value="New Currency" />
		</execute>
	</command>

	<command name="CreateNewDiscount">
		<property name="portal.acceptance" value="true" />
		<property name="test.name.skip.portal.instance" value="CommerceAdmin#CreateNewDiscount" />

		<execute macro="CommerceEntry#createNewUserSegment">
			<var name="criteriaType" value="Users" />
			<var name="criterionEntryName" value="Commerce User" />
			<var name="entryName" value="User Segment" />
		</execute>

		<execute macro="ProductMenu#gotoPortlet">
			<var name="category" value="Commerce" />
			<var name="panel" value="Site Administration" />
			<var name="portlet" value="Discounts" />
		</execute>

		<execute function="Click" locator1="Button#PLUS" />

		<execute macro="CommerceEntry#addNewDiscountsEntry">
			<var name="discountLevel" value="15" />
			<var name="discountTarget" value="Apply to Product" />
			<var name="entryTitle" value="New Discount" />
			<var name="maximumDiscountAmount" value="10" />
			<var name="userSegment" value="User Segment" />
		</execute>

		<execute macro="Button#clickPublish" />

		<execute function="AssertElementPresent" locator1="Message#SUCCESS" />
	</command>

	<command name="CreateNewMeasurementUnits">
		<property name="portal.acceptance" value="true" />
		<property name="test.name.skip.portal.instance" value="CommerceAdmin#CreateNewMeasurementUnits" />

		<execute macro="ProductMenu#gotoPortlet">
			<var name="category" value="Commerce" />
			<var name="panel" value="Site Administration" />
			<var name="portlet" value="Settings" />
		</execute>

		<execute macro="CommerceNavigator#gotoCommercePortletNavItem">
			<var name="navItem" value="Measurement Units" />
		</execute>

		<execute function="Click" locator1="Button#PLUS" />

		<execute macro="CommerceEntry#addNewDimensionUnit">
			<var name="entryName" value="New Dimension Unit" />
		</execute>

		<execute macro="Button#clickSave" />

		<execute function="AssertElementPresent" locator1="Message#SUCCESS" />

		<execute macro="CommerceNavigator#gotoCommercePortletNavItem">
			<var name="navItem" value="Weight" />
		</execute>

		<execute function="Click" locator1="Button#PLUS" />

		<execute macro="CommerceEntry#addNewWeightUnit">
			<var name="entryName" value="New Weight Unit" />
		</execute>

		<execute macro="Button#clickSave" />

		<execute function="AssertElementPresent" locator1="Message#SUCCESS" />
	</command>

	<command ignore="true" name="CreateNewNotificationTemplate">
		<property name="portal.acceptance" value="true" />
		<property name="test.name.skip.portal.instance" value="CommerceAdmin#CreateNewNotificationTemplate" />

		<execute macro="CommerceEntry#createNewUserSegment">
			<var name="criteriaType" value="Users" />
			<var name="criterionEntryName" value="Commerce User" />
			<var name="entryName" value="User Segment" />
		</execute>

		<execute macro="ProductMenu#gotoPortlet">
			<var name="category" value="Commerce" />
			<var name="panel" value="Site Administration" />
			<var name="portlet" value="Settings" />
		</execute>

		<execute macro="CommerceNavigator#gotoCommercePortletNavItem">
			<var name="navItem" value="Notificatios" />
		</execute>

		<execute macro="CommerceEntry#gotoMenuTab">
			<var name="menuTab" value="Notification Templates" />
		</execute>

		<execute function="Click" locator1="Button#PLUS" />

		<execute macro="CommerceEntry#addNewNotificationTemplate">
			<var name="entryName" value="New Notification Template" />
			<var name="fromAddress" value="test@liferay.com" />
			<var name="fromName" value="Test Test" />
			<var name="notificationType" value="Order Placed" />
			<var name="userSegment" value="User Segment" />
		</execute>

		<execute macro="Button#clickSave" />

		<execute function="AssertElementPresent" locator1="Message#SUCCESS" />
	</command>

	<command name="CreateNewPriceList">
		<property name="portal.acceptance" value="true" />
		<property name="test.name.skip.portal.instance" value="CommerceAdmin#CreateNewPriceList" />

		<execute macro="CommerceEntry#createNewCurrenciesEntry">
			<var name="code" value="NCU" />
			<var name="entryName" value="New Currency" />
		</execute>

		<execute macro="CommerceEntry#createNewUserSegment">
			<var name="criteriaType" value="Users" />
			<var name="criterionEntryName" value="Commerce User" />
			<var name="entryName" value="User Segment" />
		</execute>

		<execute macro="ProductMenu#gotoPortlet">
			<var name="category" value="Commerce" />
			<var name="panel" value="Site Administration" />
			<var name="portlet" value="Price Lists" />
		</execute>

		<execute function="Click" locator1="Button#PLUS" />

		<execute macro="CommerceEntry#addNewPriceListsEntry">
			<var name="currencyCode" value="NCU" />
			<var name="entryName" value="New Price List" />
			<var name="userSegmentName" value="User Segment" />
		</execute>

		<execute macro="Button#clickPublish" />

		<execute function="AssertElementPresent" locator1="Message#SUCCESS" />
	</command>

	<command name="CreateNewUserSegmentByOrganizations">
		<property name="portal.acceptance" value="true" />
		<property name="test.name.skip.portal.instance" value="CommerceAdmin#CreateNewUserSegmentByOrganizations" />

		<execute macro="ProductMenu#gotoPortlet">
			<var name="category" value="Users" />
			<var name="panel" value="Control Panel" />
			<var name="portlet" value="Users and Organizations" />
		</execute>

		<execute macro="Organization#addCP">
			<var name="orgName" value="Commerce Organization" />
			<var name="orgType" value="Organization" />
		</execute>

		<execute macro="CommerceEntry#createNewUserSegment">
			<var name="criteriaType" value="Organizations" />
			<var name="criterionEntryName" value="Commerce Organization" />
			<var name="entryName" value="User Segment" />
		</execute>
	</command>

	<command name="CreateNewUserSegmentByRegularRole">
		<property name="portal.acceptance" value="true" />
		<property name="test.name.skip.portal.instance" value="CommerceAdmin#CreateNewUserSegmentByRegularRole" />

		<execute macro="CommerceEntry#createNewUserSegment">
			<var name="criteriaType" value="Roles" />
			<var name="criterionEntryName" value="User" />
			<var name="entryName" value="User Segment" />
			<var name="roleType" value="Regular Role" />
		</execute>
	</command>

	<command name="CreateNewUserSegmentByUserGroups">
		<property name="portal.acceptance" value="true" />
		<property name="test.name.skip.portal.instance" value="CommerceAdmin#CreateNewUserSegmentByUserGroups" />

		<execute macro="ProductMenu#gotoPortlet">
			<var name="category" value="Users" />
			<var name="panel" value="Control Panel" />
			<var name="portlet" value="User Groups" />
		</execute>

		<execute macro="UserGroup#addCP">
			<var name="userGroupName" value="Commerce UserGroup" />
		</execute>

		<execute macro="CommerceEntry#createNewUserSegment">
			<var name="criteriaType" value="User Groups" />
			<var name="criterionEntryName" value="Commerce UserGroup" />
			<var name="entryName" value="User Segment" />
		</execute>
	</command>

	<command name="CreateNewUserSegmentByUsers">
		<property name="portal.acceptance" value="true" />
		<property name="test.name.skip.portal.instance" value="CommerceAdmin#CreateNewUserSegmentByUsers" />

		<execute macro="CommerceEntry#createNewUserSegment">
			<var name="criteriaType" value="Users" />
			<var name="criterionEntryName" value="Commerce User" />
			<var name="entryName" value="User Segment" />
		</execute>
	</command>
</definition>